
/* - ++theme++tud.theme.webcms2/js/modules.min.js - */
"use strict";var pb={overlay_counter:1};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}jQuery.buildFragment=function(e,t,n){var a,i,r,o=e[0];return t=(t=!(t=t||document).nodeType&&t[0]||t).ownerDocument||t,!(1===e.length&&"string"==typeof o&&o.length<512&&t===document&&"<"===o.charAt(0))||rnocache.test(o)||!jQuery.support.checkClone&&rchecked.test(o)||!jQuery.support.html5Clone&&rnoshimcache.test(o)||(i=!0,r=void 0!==(a=jQuery.fragments[o])),a||(a=t.createDocumentFragment(),jQuery.clean(e,t,a,n),i&&(jQuery.fragments[o]=r&&a)),{fragment:a,cacheable:i}},$.fn.prepOverlay=function(e){return this.each(function(){var t,n,a,i,r,o,l;if(t=$(this),a=(n=$.extend(!0,{width:"60%"},e)).config||{},(i=pb[n.subtype])&&(a.onBeforeLoad=i),r=a.onLoad,a.onLoad=function(){r&&r.apply(this,arguments),pb.fi_focus(this.getOverlay())},o=t.attr("href")||t.attr("src")||t.attr("action"),n.urlmatch&&(o=o.replace(new RegExp(n.urlmatch),n.urlreplace)),"inline"===n.subtype)o=o.replace(/^.+#/,"#"),$("[id='"+o.replace("#","")+"']").addClass("overlay"),t.removeAttr("href").attr("rel",o),t.overlay();else{switch(n.nt="pb_"+pb.overlay_counter,pb.overlay_counter+=1,n.selector=n.filter||n.selector,n.selector||(l=o.split(" "),o=l.shift(),n.selector=l.join(" ")),n.src=o,n.config=a,n.source=t,pb.remove_overlay(t),t.data("pbo",n),t.attr("rel","#"+n.nt),t.addClass("link-overlay"),n.subtype){case"image":t.click(pb.image_click);break;case"ajax":t.click(pb.ajax_click);break;case"iframe":pb.create_content_div(n),t.overlay(a);break;default:throw"Unsupported overlay type"}t.css("cursor","pointer")}})},pb.remove_overlay=function(e){var t=e.data("pbo");if(t){switch(t.subtype){case"image":e.unbind("click",pb.image_click);break;case"ajax":e.unbind("click",pb.ajax_click);break;default:e.unbind("click")}t.nt&&$("#"+t.nt).remove()}},pb.create_content_div=function(e,t){var n,a,i=e.width;return a="undefined"==typeof close_box_message?"Close this box.":close_box_message,(n=$('<div id="'+e.nt+'" class="overlay overlay-'+e.subtype+" "+(e.cssclass||"")+'"><div class="close"><a href="#" class="show-for-sr" title="Close this box">'+a+"</a></div></div>")).data("pbo",e),i&&(i.indexOf("%")>0?n.width(parseInt(i,10)/100*$(window).width()):n.width(i)),n.appendTo($("body")),n},pb.image_click=function(e){var t,n,a,i,r,o;return o=(t=$(this)).data("pbo"),(n=$(t.attr("rel"))).length||(n=pb.create_content_div(o)).overlay(o.config),a=n.overlay(),0===n.find("img").length?o.src&&((i=new Image).src=o.src,r=$(i),n.append(r.addClass("pb-image")),r.load(function(){a.load()})):a.load(),!1},pb.fi_focus=function(e){e.find("form div.error :input:first").focus().length||e.find("form :input:visible:first").focus()},pb.ajax_error_recover=function(e,t){var n=$("<div/>").append(e.replace(/<script(.|\s)*?\/script>/gi,""));return t?n.find(t):n},pb.add_ajax_load=function(e){0===e.find("input[name=ajax_load]").length&&e.prepend($('<input type="hidden" name="ajax_load" value="'+(new Date).getTime()+'" />'))},pb.prep_ajax_form=function(e){var t=e.closest(".pb-ajax"),n=t.closest(".overlay-ajax"),a=n.data("pbo"),i=a.formselector,r=a.closeselector,o=a.beforepost,l=a.afterpost,s=a.noform,c=n.overlay(),u=a.selector,d={beforeSerialize:function(){}};o&&(d.beforeSubmit=function(e,t,n){return o(t,e,n)}),d.success=function(e,o,h,f){$(document).trigger("formOverlayStart",[this,e,o,h,f]);var p,g,m,v,y,b=[];if((m="success"===o||"notmodified"===o)||(e=e.responseText),y=e.replace(/<script(.|\s)*?\/script>/gi,""),p=$("<div />").append(u?$("<div />").append(y).find(u):y),m&&l&&l(p,n),g=p.find(i),m&&g.length){t.empty().append(p);try{$.buildFragment([e],[document],b)}catch(t){try{$.buildFragment([e],document,b)}catch(e){}}b.length&&$.each(b,function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}),$.fn.ploneTabInit&&p.ploneTabInit(),pb.fi_focus(t),pb.add_ajax_load(g),g.ajaxForm(d),r&&p.find(r).click(function(e){return c.close(),!1}),$(document).trigger("formOverlayLoadSuccess",[this,g,c,pb,t])}else{switch(m?"function"==typeof s&&(s=s(p,a)):s=o,s){case"close":c.close();break;case"reload":c.close(),location.replace(location.href);break;case"redirect":c.close(),"function"==typeof(v=a.redirect)&&(v=v(p,e,a)),location.replace(v);break;default:p.children()?t.empty().append(p):c.close()}$(document).trigger("formOverlayLoadFailure",[this,g,c,pb,t,s])}},d.error=d.success,pb.add_ajax_load(e),e.ajaxForm(d)},pb.ajax_click=function(event){var ethis=$(this),pbo,content,api,src,el,selector,formtarget,closeselector,sep,scripts=[],e;return e=$.Event(),e.type="beforeAjaxClickHandled",$(document).trigger(e,[this,event]),!e.isDefaultPrevented()&&(pbo=ethis.data("pbo"),content=pb.create_content_div(pbo,ethis),content.overlay(pbo.config,ethis),api=content.overlay(),src=pbo.src,selector=pbo.selector,formtarget=pbo.formselector,closeselector=pbo.closeselector,$(this).find("input.submitting").removeClass("submitting"),el=$("div.pb-ajax",content),0===el.length&&(el=$('<div class="pb-ajax" />'),content.append(el)),api.getConf().fixed&&el.css("max-height",Math.floor(.75*$(window).height())),sep=src.indexOf("?")>=0?"&":"?",src+=sep+"ajax_load="+(new Date).getTime(),selector&&(src+=" "+selector),el[0].handle_load_inside_overlay=function(responseText,errorText){var ele,target;ele=$(this),"error"===errorText?ele.append(pb.ajax_error_recover(responseText,selector)):responseText.length||ele.append(ajax_noresponse_message||"No response from server."),ele.wrapInner("<div />"),formtarget&&(target=ele.find(formtarget),target.length>0&&pb.prep_ajax_form(target)),closeselector&&ele.find(closeselector).click(function(e){return api.close(),!1}),$(responseText).find("script").each(function(){eval($(this).text())}),$.fn.ploneTabInit&&ele.ploneTabInit(),api.onClose=function(){content.remove()},$(document).trigger("loadInsideOverlay",[this,responseText,errorText,api])},el.load(src,null,function(e,t){return el[0].handle_load_inside_overlay.apply(this,[e,t]),api.load(),!0}),!1)},pb.iframe=function(){var e,t;return e=this.getOverlay(),t=this.getTrigger().data("pbo"),0===e.find("iframe").length&&t.src&&e.append('<iframe src="'+t.src+'" width="'+e.width()+'" height="'+e.height()+'" />'),!0},function(e,t,n){t.registerReadyHandler("accordion-scroll",function(){e("[data-accordion]").on("click.accordion-scroll",function(t){var n=e(t.target);if(n.hasClass("accordion-title")||n.closest(".accordion-item")){var a=n.closest(".accordion-item").prevAll(".accordion-item").children("[data-tab-content]:visible").first().height();if(a){var i=e(window).scrollTop(),r=n.offset().top,o=e(this).attr("data-slide-speed")||250;r-a<i&&(i>a?e("html, body").animate({scrollTop:Math.max(i-a,0)},o):e("html, body").animate({scrollTop:Math.max(r-a,0)},o))}}})})}(jQuery,App,Foundation),function(e,t){var n='<svg id="audio-player-icons" class="svg-icons">\n\t<symbol id="symbol-play" viewBox="0 0 448 512">\n\t\t<path d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/>\n\t</symbol>\n\t<symbol id="symbol-pause" viewBox="0 0 512 512">\n\t\t<path d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/>\n\t</symbol>\n\t<symbol id="symbol-mute" viewBox="0 0 576 512">\n\t\t<path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"/>\n\t</symbol>\n\t<symbol id="symbol-unmute" viewBox="0 0 512 512">\n\t\t<path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"/>\n\t</symbol>\n\t<symbol id="symbol-download" viewBox="0 0 11 10">\n\t\t<path d="M 9.4763 2.9736 L 6.9202 2.9736 L 6.9202 0 L 4.0798 0 L 4.0798 2.9736 L 1.5237 2.9736 L 5.5 8.5632 L 9.4763 2.9736 Z"/>\n\t\t<path d="M 11 10 L 11 8.793 L 0 8.793 L 0 10 L 11 10 Z"/>\n\t</symbol>\n\t<symbol id="symbol-enterFullscreen" viewBox="0 0 32 32">\n\t\t<path d="M0 0h12L8 4l6 6-4 4-6-6-4 4M32 0H20l4 4-6 6 4 4 6-6 4 4M0 32V20l4 4 6-6 4 4-6 6 4 4m20 0V20l-4 4-6-6-4 4 6 6-4 4"/>\n\t</symbol>\n\t<symbol id="symbol-leaveFullscreen" viewBox="0 0 32 32">\n\t\t<path d="M0 4l4-4 6 6 4-4v12H2l4-4m26-6l-4-4-6 6-4-4v12h12l-4-4M0 28l4 4 6-6 4 4V18H2l4 4m26 6l-4 4-6-6-4 4V18h12l-4 4"/>\n\t</symbol>\n</svg>',a="en",i={en:{player:"Audio player",play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",volume:"Volume",currentTime:"Current time",remainingTime:"Remaining time",enterFullscreen:"Enter fullscreen",leaveFullscreen:"Leave fullscreen",download:"Download",transcription:"Transcription",hour:"hour",hours:"hours",minutes:"minutes",minute:"minutes",seconds:"seconds",second:"second"},de:{player:"Audio-Player",play:"Abspielen",pause:"Pausieren",mute:"Stummschalten",unmute:"Stummschaltung aufheben",volume:"Lautstärke",currentTime:"Aktuelle Zeit",remainingTime:"Verbleibende Zeit",enterFullscreen:"Vollbild",leaveFullscreen:"Vollbild verlassen",download:"Herunterladen",transcription:"Transkription",hour:"Stunde",hours:"Stunden",minutes:"Minuten",minute:"Minute",second:"Sekunde",seconds:"Sekunden"}},r=function(){function r(o,l){_classCallCheck(this,r),this.$element=o,this.options=t.extend({},r.defaults,this.$element.data(),l),this.lang=document.documentElement.getAttribute("lang"),this.transcriptionElement=this.options.transcription?t(".transcription",this.$element).get(0):null;var s=t("audio[controls]",this.$element).get(0);document.querySelector("#audio-player-icons")||t("body").append(t.parseHTML(n));try{this.mediaPlayer=new MediaPlayer(s,{prefix:"media",lang:this.lang in i?i[this.lang]:i[a],timeDir:"ltr",volumeDir:"ltr",show:{download:!!this.options.showDownload||!1,fullscreen:!1}})}catch(e){console.log("Error during audio player initialization.")}try{if(this.options.captcha){var c=t(this.mediaPlayer.toolbar.parentNode),u=c.parents(".media-container");u.length>0&&(t(".media-player",u).attr("aria-label",u.attr("aria-label")),u.removeAttr("aria-label"));try{t("button",c).attr("type","button")}catch(e){console.log("Error during audio player customization.")}}else this.customizeMediaPlayer();t("form .media-player button").click(function(e){e.preventDefault()})}catch(e){console.log("Error during audio player customization.")}e.registerPlugin(this,"AudioPlayer")}return _createClass(r,[{key:"customizeMediaPlayer",value:function(){var n,r,o=this.mediaPlayer.toolbar,l=document.createElement("div");l.className+="media-toolbar second-toolbar",l.setAttribute("role","toolbar"),l.setAttribute("aria-label",o.getAttribute("aria-label")),o.nextSibiling?o.parentNode.insertBefore(l,o.nextSibiling):o.parentNode.appendChild(l),l.appendChild(this.mediaPlayer.play),l.appendChild(this.mediaPlayer.mute),l.appendChild(this.mediaPlayer.volume),l.appendChild(this.mediaPlayer.download),this.options.transcription&&(r=this.lang in i?i[this.lang].transcription:i[a].transcription,this.mediaPlayer.transcript=n=document.createElement("button"),n.className+="media-control media-transcript",n.setAttribute("title",r),n.setAttribute("data-toggle",this.options.toggleId),l.appendChild(n),new e.Toggler(t(this.transcriptionElement)))}}]),r}();r.defaults={},e.plugin(r,"AudioPlayer")}(Foundation,jQuery),function(e,t){var n=function n(a,i){_classCallCheck(this,n),this.$element=a,this.options=t.extend({},n.defaults,this.$element.data(),i),this.$element.devbridgeAutocomplete(this.options),e.registerPlugin(this,"Autocomplete")};n.defaults={minChars:3},e.plugin(n,"Autocomplete")}(Foundation,$),function(e,t){var n=function n(a,i){_classCallCheck(this,n);this.$element=a,this.options=i=t.extend({},n.defaults,this.$element.data(),i),e.registerPlugin(this,"TUDBatch"),"True"===this.options.ajaxEnabled&&null!==this.options.container&&t("a",this.$element).click(function(e){var n=t(this).attr("data-ajax-url")||t(this).attr("href"),a=-1===n.indexOf("#")?"":n.substring(n.indexOf("#")+1),r=i.container,o=t("#"+r),l=n.substring(n.indexOf("?")+1);history.pushState(null,"",window.location.pathname+"?"+l),o.addClass("loading"),e.preventDefault(),t.ajax({url:n,success:function(e){var n,i=t(t.parseHTML(e));o.replaceWith(i.find("#"+r)),t(document).foundation();var l=(n=t("#"+(a||r))).offset().top;t("html, body").scrollTop()>l&&t("html, body").scrollTop(l),n.is("[tabindex]")||n.attr("tabindex","-1"),n.focus()}})})};n.defaults={ajaxEnabled:!1,container:null},e.plugin(n,"TUDBatch")}(Foundation,$),function(e,t){t.registerReadyHandler("tud.captcha",function(){var t=e(".captcha"),n=e(".captchaImage img",t),a=n.attr("src"),i=e(".media-container.audio audio",t),r=i.attr("src");e(".reload",t).click(function(t){t.preventDefault();var o=a.replace("@@captcha/image","@@captcha/reset");e.ajax(o,{success:function(e,t,o){var l=(new Date).getTime();n.attr("src",a+"?a="+l),i.attr("src",r+"?a="+l)},error:function(e,t,n){n?console.log("Error during captcha reload call: "+n):console.log("Error during captcha reload call.")}})}),-1==window.navigator.userAgent.indexOf("MSIE")&&-1==window.navigator.userAgent.indexOf("Trident")||e("#captcha_audio_ie_message").css("display","block")})}(jQuery,App),function(e,t){var n=function(){function n(a,i){_classCallCheck(this,n),this.$element=a,this.options=t.extend({},n.defaults,this.$element.data(),i),this.resize(),this.events(),this.$element.parents(".vak-ads").length>0&&this.randomizeVakAd(),this.$element.owlCarousel(this.options),e.registerPlugin(this,"Carousel")}return _createClass(n,[{key:"destroy",value:function(){this.$element.trigger("destroy.owl.carousel"),e.unregisterPlugin(this)}},{key:"randomizeVakAd",value:function(){var e=this,n=new Array,a=new Array;this.$element.children().each(function(e){var i=t(this),r=i.find("picture").attr("data-default-src").split("/"),o=r.indexOf("@@images"),l=r[o-1];l.indexOf("_left")>-1||l.indexOf("_links")>-1?n.push(i):a.push(i),i.detach()});var i=function(){return.5-Math.random()};[n,a].forEach(function(t){t.sort(i),t.length>0&&e.$element.append(t.pop())}),a.concat(n).sort(i).forEach(function(t){e.$element.append(t)})}},{key:"events",value:function(){var e=this;this.$element.on("initialized.owl.carousel.navigation",function(n){e.$element.find(".owl-dot").each(function(e){var n=t(this);""==n.text().trim()&&n.append("<span class='show-for-sr'>"+(e+1)+"</span>")})}),this.$element.on("resize.zf.carousel",function(t){t.stopPropagation(),e.resize()})}},{key:"resize",value:function(){this.$element.hasClass("teaser-box")&&t(".teaser-with-more",this.$element).length&&this.$element.on("initialized.owl.carousel resize.owl.carousel",function(){var e=this;setTimeout(function(){var n=t(e),a=t(".owl-item",n),i=t(".more-wrapper",a),r=t(".more",i);i.css({"margin-right":a.css("margin-right"),width:a.width(),"padding-right":0}),r.css({"margin-right":0})},10)})}}]),n}();n.defaults={nav:!0,rewind:!0,loop:!1,autoplay:!1,center:!0,slideBy:"page",items:1,navText:['<span class="show-for-sr">Next</span>','<span class="show-for-sr">Previous</span>'],touchDrag:!window.navigator.msPointerEnabled},e.plugin(n,"Carousel")}(Foundation,$),function(e,t,n){var a=function(){function e(a,i){var r=this;_classCallCheck(this,e),this.$element=a,this.uuid=n.GetYoDigits(6,"combobox"),this.options=t.extend({},e.defaults,this.$element.data(),i),["gray","gray-touch","stacked-items"].forEach(function(e){r.$element.is("."+e+", .select2-"+e)&&(r.options.theme=e)}),this.options.sortable&&(this.options.theme="stacked-items"),this.options.dropdownParentSelector&&(this.options.dropdownParent=t(this.options.dropdownParentSelector).first()),!this.options.placeholder&&this.$element.attr("placeholder")&&(this.options.placeholder=this.$element.attr("placeholder")),void 0===this.options.label&&(this.options.label=this.getA11yLabel()),this.$element.select2(this.options),this.options.sortable&&this.sortable(),this.$showFor=this.$element.closest("[class*='show-for']"),this.$showFor.length>0&&this.inheritShowFor(),this.$element.attr("data-combobox",this.uuid),this.vanillaChangeEvents(),this.$element.on("select2:unselect.tud",function(e){r.$element.one("select2:opening.tud",function(e){r.$element.off("select2:closing.tud"),e.preventDefault()}),r.$element.one("select2:closing.tud",function(e){r.$element.off("select2:opening.tud")})})}return _createClass(e,[{key:"getA11yLabel",value:function(){function e(n){var a=t(n);if(0==a.find("select").length)return a.text();var i="";return a.contents().each(function(){"SELECT"!=this.nodeName&&(i+=e(this))}),i}var n,a=this.$element.attr("aria-labelledby");if(a&&(n=e(t("#"+a))))return n.trim();if(n=this.$element.attr("aria-label"))return n;var i=this.$element.attr("id");if(i){var r=e(t("label[for='".concat(i,"']")));if(r)return r.trim()}return(n=e(this.$element.parents("label").first()))?n.trim():void 0}},{key:"sortable",value:function(){var e=this,n=this.$element.parent().find("ul.select2-selection__rendered"),a="li.select2-selection__choice";n.sortable({forcePlaceholderSize:!0,items:a,placeholder:"placeholder",update:function(i,r){t(n.find(a).get().reverse()).each(function(n,a){var i=t(a).data("id"),r=e.$element.find('option[value="'+i+'"]')[0];e.$element.prepend(r)})}})}},{key:"inheritShowFor",value:function(){var e=this.$showFor.attr("class").split(" ").filter(function(e,t){return e.match("^show-for")}).join(" ");this.$element.on("select2:open",function(){t(".select2-container--open").addClass(e)})}},{key:"vanillaChangeEvents",value:function(){var e=this;this.$element.on("select2:selecting select2:unselecting select2:clearing",function(){var n=function(e){e.stopImmediatePropagation()};e.$element.one("change",n);var a=t._data(e.$element[0],"events");a.change.unshift(a.change.pop()),window.setTimeout(function(){e.$element.off("change",n)},10)}),this.$element.on("select2:select select2:unselect select2:clear",function(){var e=null;"function"==typeof Event?e=new Event("change",{bubbles:!0,cancelable:!0}):(e=document.createEvent("Event")).initEvent("change",!0,!0),this.dispatchEvent(e)})}}]),e}();a.defaults={minimumResultsForSearch:1/0,sortable:!1,width:"100%",templateSelection:function(e,t){return t.data("id",e.id),e.text},dropdownParentSelector:""},e.registerUiComponent("combobox",function(){t("select").not("[data-combobox]").not("[data-select2-url]").not("[class^='cke_']").filter(function(){return 0===t(this).closest(".datagridwidget-empty-row, .datagridwidget-empty").length}).each(function(e,n){new a(t(n))})})}(App,$,Foundation),function(e,t){t.registerUiComponent("datepicker",function(){var t=e(".datepicker").not(".hasDatepicker").filter(function(t,n){return 0==e(n).parents(".faceted-widget").length}),n=!1,a=function(e,t){return t?"[name='"+e+"-"+t+"'], [name='"+e+"_"+t+"']":"[name='"+e+"']"},i=function(t,i){if(!n&&(null!=t&&(void 0===i&&(i=!1),t.closest(".ArchetypesDatetimeWidget, .ArchetypesCalendarWidget").length>0))){var r=null;r=i?(new Date).fromString(t.val()):t.datepicker("getDate");var o=t.data("realname"),l=e(a(o)),s=e(a(o,"day")),c=e(a(o,"month")),u=e(a(o,"year"));if(!(0==e(a(o,"unrequired")).length)&&""==t.val())return s.val("00"),c.val("00"),void u.val("0000");var d=l.val(),h=s.val(),f=c.val(),p=u.val();null===r&&(r=new Date,d="",h="",f="",p="");var g=0,m=e(a(o,"hour"));m.length>0&&(g=m.val());var v=0,y=e(a(o,"minute"));y.length>0&&(v=y.val()),l.val(r.format("y-M-d")+" "+g+":"+v),s.val(r.getDate()),c.val(r.getMonth()+1),u.val(r.getFullYear()),n=!0;var b=null;"function"==typeof Event?b=new Event("change",{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event")).initEvent("change",!0,!0),d!==l.val()&&l.length&&l.get(0).dispatchEvent(b),h!==s.val()&&s.length&&s.get(0).dispatchEvent(b),f!==c.val()&&c.length&&c.get(0).dispatchEvent(b),p!==u.val()&&u.length&&u.get(0).dispatchEvent(b),n=!1}},r="de"==e("html").attr("lang")?"Datumsauswahl":"Datepicker";e.datepicker.setDefaults(e.extend({defaultDate:"d",showOn:"button",buttonText:"<i class='icon icon-tud_calendar show-for-sr'>"+r+"</i>",showAnim:"slideDown",formatDate:"mm/dd/yy",beforeShow:function(t,n){var a=e(n.dpDiv),i=e(t).outerWidth(!1)-a.outerWidth(!1);a.css("margin-left",i)},onSelect:function(t){i(e(this))}},e.datepicker.regional[e("html").attr("lang")])),e.each(t,function(t,n){var r=e(n);"date"===r.attr("type")&&r.attr("type","text");var o=r.data("format");o=void 0!==o?(o=(o=(o=o.replace("${d}","dd")).replace("${b}","M")).replace("${m}","mm")).replace("${Y}","yy"):"mm/dd/yy",r.datepicker({dateFormat:o});var l=r.attr("data-min-date");void 0!==l&&"0000"!==l&&r.datepicker("option","minDate",new Date(Date.parse(l)));var s=r.attr("data-max-date");void 0!==s&&"0000"!==l&&r.datepicker("option","maxDate",new Date(Date.parse(s)));var c=r.data("realname"),u=e(a(c,"day")).val(),d=e(a(c,"month")).val(),h=e(a(c,"year")).val();if(e.isNumeric(u)&&e.isNumeric(d)&&e.isNumeric(h)){var f=e.datepicker.formatDate(o,new Date(h,d-1,u));r.datepicker("setDate",f)}else i(r);e(a(c,"day")+", "+a(c,"month")+", "+a(c,"year")).on("change",function(t){var n=e(a(c,"day")).val(),i=e(a(c,"month")).val(),l=e(a(c,"year")).val(),s=e.datepicker.formatDate(o,new Date(l,i-1,n));r.datepicker("setDate",s)})}),t.change(function(){i(e(this),!0)}),e(".datetimewidget-time select").change(function(){var t=e(this),n=t.closest(".plone_jscalendar"),a=e(".datepicker",n);t.attr("data-datepicker","foo-datepicker"),i(a)})},["recurrenceinput"])}(jQuery,App),function(e,t,n){t.registerReadyHandler("flyoutNavigation",function(){e("h1 a:not(.external)","#flyout-content").bind("click",function(t){if(!n.MediaQuery.atLeast("xlarge")){t.preventDefault();var a=e(this).parent().parent().children("nav");e("nav","#flyout-content").not(a).css("display",""),a.is(":visible")?a.css("display",""):a.show()}})})}(jQuery,App,Foundation),function(e,t){var n=function(){function n(a,i){_classCallCheck(this,n),this.$element=a,this.options=t.extend({},n.defaults,this.$element.data(),i),this.$owlGallery=t(".owl-gallery",this.$element),this.$overlay=null,this.$full=null,this.$preview=null,this.$imageLinkSelector="a:not(figcaption a):not(caption a)",this.singleImage=!1,this.bindings(),e.registerPlugin(this,"Gallery")}return _createClass(n,[{key:"bindings",value:function(){var n=this;this.$element.on("click.tud.gallery",".gallery-item "+this.$imageLinkSelector,function(a){if(a.preventDefault(),e.MediaQuery.atLeast("medium")){var i=t(a.currentTarget);i.addClass("loading"),window.setTimeout(function(){null===n.$overlay&&(n.initOverlay(),n.mobileSafariWorkaround()),n.openOverlay(i,function(){return i.removeClass("loading")})},0)}}),this.$owlGallery.on("destroy.owl.carousel",function(e){n.destroy()})}},{key:"owlBindings",value:function(){var e=this;this.$full.on("translate.owl.carousel.tud.gallery",function(t){t.stopPropagation(),e.synchronize(t.item.index)}),t("a",this.$preview).on("click.tud.gallery",function(n){n.preventDefault();var a=t(n.target).closest(".owl-item").index();e.scrollFullTo(a)})}},{key:"initOverlay",value:function(){var n=t(".gallery-item",this.$element);this.singleImage=1===n.length;var a='<div class="reveal large gallery'+(this.singleImage?" single":"")+'">\n<button class="close-button" data-close aria-label="Close modal" type="button">\n<span class="show-for-sr">close</span>\n</button>\n<div class="full" />\n<div class="preview" />\n</div>';this.$overlay=t(a),this.$full=t(".full",this.$overlay),this.$preview=t(".preview",this.$overlay);for(var i=0;i<n.length;i++){var r=n[i],o=t(this.$imageLinkSelector,r),l=o.attr("href"),s=o.attr("data-preview-url"),c=t(".copyright",r),u=c.text(),d=c.parent(".copyright-link").attr("href")||c.attr("data-url");d&&(u='<a href="'+d+'" target="_blank">'+u+"</a>");var h=t("figcaption > *",r)||t("p.caption",r)||"";if(t(".copyright, .copyright-wrapper",h).length)h=h.clone(),t(".copyright, .copyright-wrapper",h).remove();var f=h.text().trim().length&&h.html()||"",p=f||u?'<figcapture class="caption">\n'+f+(f&&u?"</br>\n":"")+u+"</figcapture>":'<span class="caption empty"/>',g='<figure class="image-flex">\n<div class="image-wrapper">\n'+(this.singleImage?'<img src="'+l+'" />\n':'<img class="owl-lazy" data-src="'+l+'" />\n')+"</div>\n"+p+"</figure>\n";if(this.$full.append(t.parseHTML(g)),n.length>1){var m='<a href="#" class="no-icon">\n<figure class="media">\n<span class="picture-element">\n<img class="owl-lazy" data-src="'+s+'" />\n</span>\n</figure>\n</a>';this.$preview.append(t.parseHTML(m))}}this.singleImage||(this.$full.addClass("owl-carousel owl-full"),this.$preview.addClass("owl-carousel owl-preview"),new e.Carousel(this.$full,{items:1,center:!0,dots:!1,lazyLoad:!0,lazyLoadEager:2}),new e.Carousel(this.$preview,{items:5,center:!1,margin:10,nav:!1,lazyLoad:!0,lazyLoadEager:1,previewFor:this.$full}),this.owlBindings()),this.reveal=new e.Reveal(this.$overlay,{animationIn:"fade-in",animationOut:"fade-out",vOffset:0})}},{key:"openOverlay",value:function(n,a){var i=this,r=t(".gallery-item a",this.$element).not("figcaption a").not(".caption a").index(n);this.$full.trigger("to.owl.carousel",[r,0]),this.synchronize(r,0);var o=this.$overlay.parent().addBack();if(this.singleImage)this.$overlay.foundation("open"),o.css({display:"block",visibility:""}),a();else{o.css({display:"block",visibility:"hidden"});var l=2;t().add(this.$full).add(this.$preview).one("refreshed.owl.carousel",function(){0==--l&&(i.$overlay.foundation("open"),o.css({visibility:""}),i.$overlay.one(e.transitionend(i.$overlay),function(e){window.setTimeout(function(){i.$full.trigger("focus"),a()},100)}))}).trigger("refresh.owl.carousel")}}},{key:"mobileSafariWorkaround",value:function(){var e=this,n=0,a=function(a){a?t(window).scrollTop(n):n=t(window).scrollTop(),t("body").removeAttr("style"),e.reveal.$overlay.css({position:"absolute",height:window.innerHeight+"px","margin-top":t(window).scrollTop()+"px"}),t("body").css({position:"absolute",top:-t(window).scrollTop()+"px",width:"100%",height:t(window).scrollTop()+window.innerHeight+"px"}),t(window).scrollTop(0)};this.$overlay.on("open.zf.reveal.tud.gallery",function(){a(),t(window).on("orientationchange.tud.gallery resize.tud.gallery",function(){a(!0)})}),this.$overlay.on("closed.zf.reveal.tud.gallery",function(){t(window).off("orientationchange.tud.gallery resize.tud.gallery"),t("body").removeAttr("style"),e.reveal.$overlay.removeAttr("style"),t(window).scrollTop(n)})}},{key:"synchronize",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.$owlGallery){var a=t(".gallery-item",this.$element).get(e),i=this.$owlGallery.find(".owl-item").has(a).index(),r=null!=typeof n?[i,n]:i;this.$owlGallery.trigger("to.owl.carousel",r)}}},{key:"scrollFullTo",value:function(e){this.$full.trigger("to.owl.carousel",e)}},{key:"destroy",value:function(){this.$element.off("click.tud.gallery"),this.$owlGallery.off("destroy.owl.carousel.tud.gallery"),this.$full&&this.$full.off("translate.owl.carousel.tud.gallery"),this.$preview&&t("a",this.$preview).off("click.tud.gallery"),this.$full&&this.$full.trigger("destroy.owl.carousel"),this.$preview&&this.$preview.trigger("destroy.owl.carousel"),this.$overlay&&this.$overlay.foundation("_destroy"),this.$overlay&&this.$overlay.off("open.zf.reveal.tud.gallery"),this.$overlay&&this.$overlay.off("closed.zf.reveal.tud.gallery")}}]),n}();n.defaults={},e.plugin(n,"Gallery")}(Foundation,jQuery),function(e,t){t.registerReadyHandler("iframe",function(){iFrameResize({scrolling:"omit",heightCalculationMethod:"lowestElement",initCallback:function(e){e.scrolling="no"}})})}(jQuery,App),function(e,t){var n=function(){function n(a,i){_classCallCheck(this,n),this.$element=a,this.$field=e("[data-max-input-field]",a),this.$label=e("[data-max-input-label]",a),this.$alert=e("[data-max-input-alert]",a),this.warning=this.$alert.data("max-input-warning"),this.exact=this.$alert.data("max-input-exact"),this.error=this.$alert.data("max-input-error"),this.is_sh_widget=e("[data-soft-hyphen]",a).length,this.options=e.extend({},n.defaults,this.$element.data(),i);var r=this;this.$field.on("input",function(){r.updateCount.call(r)}),t.registerPlugin(this,"MaxInputLength")}return _createClass(n,[{key:"updateCount",value:function(){var e=this.$field.val().length;this.is_sh_widget&&(e-=(this.$field.val().match(/\u205e/g)||[]).length);var t=this.options.max-e;t<this.options.error?this.$label.hasClass("limit-error")||(this.$label.removeClass("limit-warning"),this.$label.addClass("limit-error"),this.$alert.html(this.error)):t==this.options.error?(this.$label.removeClass("limit-error"),this.$label.addClass("limit-warning"),this.$alert.html(this.exact)):t<this.options.warning?this.$label.hasClass("limit-warning")&&this.$alert.html()==this.warning||(this.$label.removeClass("limit-error"),this.$label.addClass("limit-warning"),this.$alert.html(this.warning)):(this.$label.hasClass("limit-error")||this.$label.hasClass("limit-warning"))&&(this.$label.removeClass("limit-error"),this.$label.removeClass("limit-warning"),this.$alert.html("")),this.$label.text(t)}}]),n}();n.defaults={max:100,warning:11,error:0},t.plugin(n,"MaxInputLength")}($,Foundation),function(e,t){t.registerReadyHandler("imageRights",function(){e("body").on("click",".copyright[data-url]",function(t){t.preventDefault(),t.stopPropagation(),window.location=e(this).data("url")}),e("body").on("mouseenter",".copyright[data-url]",function(t){e(this).parents("a").addClass("no-hover")}).on("mouseleave",".copyright[data-url]",function(t){e(this).parents("a").removeClass("no-hover")})})}(jQuery,App),function(e,t){t.registerReadyHandler("foundation",function(){e(document).foundation()})}(jQuery,App),function(e){e.i18n.setTTL(216e5)}(jarn),function(e){if(!e.fn.getID){var t=(new Date).getTime();e.fn.getID=function(e){function n(){var e=this.getAttribute("id");return e||(e="ID-"+t++,this.setAttribute("id",e)),e}if(this[0])return e&&this.each(n),n.call(this[0])}}}(jQuery),jQuery.widget("tud.block",{options:{className:"loading"},_init:function(){this.toggle()},isBlocked:function(){var e=this.element,t=this.options;return e.hasClass(t.className)},toggle:function(){var e=this.element,t=this.options;e.toggleClass(t.className)},block:function(){var e=this.element,t=this.options;e.addClass(t.className)},unblock:function(){var e=this.element,t=this.options;e.removeClass(t.className)}}),function(e,t){var n=/[^\\]+$/;t.registerReadyHandler("replacedFileUploadHelper",function(){e("input[type='file']").filter(function(){return e(this).siblings(".filename").length>0}).on("change",function(t){e(this).siblings(".filename").text(this.value.match(n))})})}(jQuery,App),function(e,t){t.registerReadyHandler("bindButtonWithUploadField",function(){e(".fileupload .button").click(function(t){return e(this).parent().find("input").click(),t.preventDefault()})})}(jQuery,App);var TudMotionUI=function(e){var t=e("html").hasClass("ie9"),n=/slow|fast/,a=function(e){var t=n.exec(e);return t?t[0]:""},i=function(n,i,r,o){o||(o=function(){}),t||!MotionUI?r.search("fade")>-1?n?e(i).fadeIn(a(r),o):e(i).fadeOut(a(r),o):n?e(i).show(0,o):e(i).hide(0,o):n?MotionUI.animateIn(i,r,o):MotionUI.animateOut(i,r,o)};return{animateOut:function(e,t,n){i(!1,e,t,n)},animateIn:function(e,t,n){i(!0,e,t,n)}}}(jQuery);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(e,t){t.registerReadyHandler("zf.accordion-owl-integration",function(){e("[data-accordion]").filter(function(){return e("[data-carousel]",this).length>0}).on("down.zf.accordion",function(t){e("[data-carousel]:visible",t.currentTarget).trigger("refresh.owl.carousel")})})}(jQuery,App),function(e,t){e.registerReadyHandler("fixEqualizer",function(){t("[data-equalizer]").on("preequalized.zf.equalizer",function(){t("[data-equalizer-watch]",t(this)).length<2&&t(this).foundation("destroy")})})}(App,jQuery),function(e){e.registerReadyHandler("table-scrollable",function(){$(".table-scrollable:not([data-table-to-dropdown]), form[id^='users_'] table, form[id^='groups_'] table").wrap($("<div/>").addClass("scroll-wrapper"));var e=$("div.scroll-wrapper");e.length>0&&e.doubleScroll({resetOnWindowResize:!0})})}(App),function(e,t,n){t.registerReadyHandler("accessibility-reveal",function(){var t=e("body").children("*:not(.reveal-overlay)");e(n).on("open.zf.reveal",function(){t.attr("aria-hidden",!0)}),e(n).on("closed.zf.reveal",function(){t.attr("aria-hidden",!1)})})}(jQuery,App,window),function(e,t){var n=function(e){e&&(window.location=decodeURI(decodeURIComponent(e)))};e.widget("tud.jumpSelect",{_create:function(){var t=this.element;t.on("select2:select",function(t){n(e(this).val())}),t.on("select2:open",function(){t.data("select2").$results.on("mouseup.mobileHelper","[aria-selected=true]",function(a){var i=e(this).index()+1,r=e("option:nth-child("+i+")",t);n(r.val())})}).on("select2:close",function(){t.data("select2").$results.off("mouseup.mobileHelper")})}}),t.registerReadyHandler("mobileHelper",function(){e(".jump-select").jumpSelect()},["combobox"])}(jQuery,App),function(e,t){e.widget("tud.navigation",{options:{animationTime:200,initialHeight:0,lang:e("html").attr("lang"),debug:!1},_create:function(){var t=this,n=this.options,a=this.element;n.setMainMargin=e(".nav-breadcrumbs",e(a)).length>0||e("#portal-globalnav").find("li.selected.active").length>0,t._initBreadcrumbNavigation(),t._initBackToTopButton(),t._initFlyoutScreenReadability(),setTimeout(function(){t._initCurrentOpenSubnavigationFlyout.call(t)},50)},update:function(){e("#nav-mobile-button").is(":visible")||e("#nav-breadcrumbs .current-subnav ul li").length>0&&this._trimCurrentOpenSubnavigation()},_initBackToTopButton:function(){var t=this.options,n=e("#go-to-top-button"),a=e("main").offset().top;e(window).scroll(function(){e(this).scrollTop()>a?n.stop(!0,!0).fadeIn(t.animationTime):n.stop(!0,!0).fadeOut(t.animationTime)}),n.click(function(n){n.preventDefault(),e("html, body").animate({scrollTop:0},t.animationTime)})},_initBreadcrumbNavigation:function(){var t,n,a=this.element,i=e(a),r=!1,o=e("#nav-breadcrumbs"),l={hideSubMenu:o.attr("data-hide-submenu-text"),showSubMenu:o.attr("data-show-submenu-text")},s=e("#nav-breadcrumbs > ul",i),c=s.children("li:not(.start)"),u=s.closest(".row").width(),d=0;for(s.children("li:not(.current-subnav)").focusin(function(){e(":focus",e(this)).length&&(e(this).css("max-width","none"),e("a:first, button",e(this)).add(e(this)).addClass("has-focus-within"))}).focusout(function(){0===e(":focus",e(this)).length&&(e(this).css("max-width",""),e("a:first, button",e(this)).add(e(this)).removeClass("has-focus-within"))});;){if(s.children("li:not(.current-subnav)").toArray().map(function(t){return e(t).outerWidth()}).reduce(function(e,t){return e+t},0)<u)break;if(t=s.children("li:not(.expand):not(.start):not(.current-subnav)").eq(d),!r){var h=e("a:first span",t).text(),f=e("<li/>");n=e("<a/>").attr({href:"#","aria-label":h,title:h}).html("..."),f.append(n),f.attr("class",t.attr("class")),f.addClass("expand"),t.before(f)}if(t.addClass("hide"),r=!0,++d>42)break}function p(e,t){t.removeClass("open"),e.attr("aria-expanded","false"),e.html(l.showSubMenu)}r&&n.attr("href",t.find("a").attr("href")),s.on("click","button",function(t){t.preventDefault();var n,a=e(this),i=a.closest("li"),r=e(".subnav",i);i.hasClass("open")?p(a,i):(n=a,i.addClass("open"),n.attr("aria-expanded","true"),n.html(l.hideSubMenu),c.children("a").one("focus.accessibilitySubmenu, mouseover.accessibilitySubmenu",function(){p(a,i)}),r.one("focusout.accessibilitySubmenu",function(){setTimeout(function(){0===e(":focus",i).length&&p(a,i)},0)}),e("a",r).one("keydown.accessibilitySubmenu",function(e){27===e.which&&(e.preventDefault(),p(a,i),a.focus())}))})},_initFlyoutScreenReadability:function(){var t=this,n="de"==this.options.lang?"Menü schließen":"Close menu";e("#navigation-flyout-button, #nav-meta a").click(function(a){var i=e(a.currentTarget);if("false"==i.attr("aria-expanded")){e("#navigation-flyout-button[aria-label], #nav-meta a[aria-label]").removeAttr("aria-label");var r=t._findFlyoutForLink(i);setTimeout(function(){e("input, a",r).not(":hidden").first().focus(),i.attr("aria-label",n)},50)}else i.removeAttr("aria-label"),setTimeout(function(){i.focus()},50)}),e("#flyout-content button.close-button").click(function(t){e("#navigation-flyout-button").removeAttr("aria-label")}),e("#flyout-content-wrapper a").last().add(e("#flyout-lang a").last()).add(e("#flyout-search input").last()).add(e("#flyout-internal a").last()).add(e("#flyout-accessibility a").last()).keydown(function(n){if(9==n.which&&!n.shiftKey){n.preventDefault();var a=e(n.currentTarget).parents("#flyout-content-wrapper, #flyout-lang, #flyout-search, #flyout-internal, #flyout-accessibility");t._findLinkForFlyout(a).focus()}}),e("#flyout-content-wrapper, #flyout-lang, #flyout-search, #flyout-internal, #flyout-accessibility").keydown(function(n){if(27==n.which){var a=e(n.currentTarget),i=t._findLinkForFlyout(a);0!==i.length&&i.click()}})},_findLinkForFlyout:function(t){return e("header .bg-blue a[data-toggle="+t.attr("id")+"]")},_findFlyoutForLink:function(t){return e("header #"+t.attr("data-toggle"))},_initCurrentOpenSubnavigationFlyout:function(){var t=this.options,n=e("#nav-breadcrumbs .current-subnav ul");t.currentOpen=n,this._trimCurrentOpenSubnavigation();e("li#expand a",n);e("#nav-breadcrumbs-current-expand").on("on.zf.toggler",function(t){e("li#expand a",t.target).html("").addClass("open")}).on("off.zf.toggler",function(t){e("li#expand a",t.target).html("...").removeClass("open")})},_trimCurrentOpenSubnavigation:function(){var t=this.options,n=t.currentOpen,a=e("li:not(#expand)",n);if(!(a.length<1)){var i=a.first(),r=a.last(),o=!1,l=n.outerHeight()-n.height(),s=2*i.height(),c=Math.round(i.offset().top+s),u=e("li#expand",n);u.length||(u=e("<li/>").attr("id","expand").append(e("<a/>").html("...").attr("data-toggle","nav-breadcrumbs-current-expand"))),t.initialHeight=r.offset().top-i.offset().top+i.height()+l,a.removeClass("trim");var d=u.outerWidth();if(u.detach(),Math.round(r.offset().top+r.outerHeight())>c)o=!0,d||(d=u.css({position:"absolute",left:"-99999px"}).appendTo(n).outerWidth(),u.css({position:"",left:""}),u.detach()),a.removeClass("trim"),e(a.get().reverse()).each(function(t,a){var i=e(a);if(Math.round(i.offset().top+i.outerHeight())>c)i.addClass("trim");else{if(!(t>0))return!1;if(!(i.offset().left+i.outerWidth()>n.offset().left+n.innerWidth()-d))return!1;i.addClass("trim")}}),e("li:not(.trim)",n).last().after(u);return o}}});var n=null;t.registerReadyHandler("navigation",function(){(n=e("#header").find("#nav")).navigation()}),t.registerResizeHandler("navigation",function(){n.navigation("update")})}(jQuery,App),function(e,t){var n=["/@@chatajax","/@@wcfcmenu"];t.options.ajax=!1,t.options.restartOnPushState=!1,t.options.restartOnRequestAfter=!1,t.options.startOnPageLoad=!1;var a=0;e("body").addClass("no-pace"),t.options.elements.selectors.push("body.no-pace");var i=function(e){var t,a,i,r;for(a=0,i=(r=n).length;a<i;a++)if("string"==typeof(t=r[a])){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1};e(document).ajaxSend(function(n,r,o){i(o.url)||(0==a&&(e("body").removeClass("no-pace"),t.restart()),a++)}),e(document).ajaxComplete(function(t,n,r){i(r.url)||0==--a&&e("body").addClass("no-pace")})}(jQuery,window.Pace),function(e,t){var n=[{time:0,msgid:"pfg_wait_information_immediate",visual:!1},{time:8,msgid:"pfg_wait_information1",visual:!0},{time:16,msgid:"pfg_wait_information2",visual:!0}];e.registerReadyHandler("pfgFormWait",function(){var e=document.querySelector(".pfg-form form");if(e){var a=$("html").attr("lang");t.i18n.loadCatalog("tud.theme.webcms2.jarn",a);var i=t.i18n.MessageFactory("tud.theme.webcms2.jarn");e.addEventListener("submit",function t(a){var r;a.preventDefault(),e.removeEventListener("submit",t),(r=document.getElementById("pfg-ajax-error"))&&r.remove();var o=_slicedToArray(function(){var t=e.querySelector(".formControls"),n=document.createElement("div");return n.classList.add("row","collapse"),n.innerHTML='\n                <p aria-hidden="true" class="column small-2 loading loading-inline loading-transparent"></p>\n                <p role=\'status\' class="column small-10"></p>\n            ',t.appendChild(n),[n,n.querySelector("p:last-child")]}(),2),l=o[0],s=o[1],c=null;!function e(t){n.length<=t||(c=setTimeout(function(){s.innerHTML=i(n[t].msgid),n[t].visual?s.classList.remove("show-for-sr"):s.classList.add("show-for-sr"),e(++t)},1e3*n[t].time))}(0);var u=e.querySelector("input[type=submit]");function d(){clearTimeout(c),l.remove(),u.disabled=!1,e.addEventListener("submit",t);var n='\n                    <dl id="pfg-ajax-error" class="portalMessage error" tabindex="0" role="alert">\n                        <span class="show-for-sr">'.concat(i("accessibility_status_message"),"</span>\n                        <dt>").concat(i("error"),"</dt>\n                        <dd>").concat(i("pfg_error_message"),"</dd>\n                    </dl>\n                ");document.getElementById("portal-message").insertAdjacentHTML("afterbegin",n),document.getElementById("pfg-ajax-error").scrollIntoView()}u.classList.remove("submitting"),u.disabled=!0;var h=new XMLHttpRequest,f=new FormData(e);h.addEventListener("load",function(e){200==e.target.status?(clearTimeout(c),document.open(),document.write(e.target.responseText),document.close()):d()}),h.addEventListener("error",function(e){d()}),h.open("POST",e.getAttribute("action")),h.send(f)})}})}(App,jarn),function(e,t,n){t.widget("tud.piwikOptOut",{_create:function(){var n=this,a="piwikTrackingStatus",i=t("input:checkbox",this.element),r="disabled"!=e.localStorage.getItem(a);this.optInElement=t(".opt-in",this.element).detach(),this.optOutElement=t(".opt-out",this.element).detach(),i.prop("checked",r),i.change(function(t){e.localStorage.setItem(a,this.checked?"enabled":"disabled"),n._refreshLabel(this.checked)}),this._refreshLabel(r)},_refreshLabel:function(e){var n=e?this.optOutElement:this.optInElement;(e?this.optInElement:this.optOutElement).detach(),t("label",this.element).append(n)}}),n.registerReadyHandler("piwikOptOut",function(){t(".piwik-opt-out").piwikOptOut()})}(window,jQuery,App),function(e,t){t.registerReadyHandler("formUnload",function(){if(0!==e("form.enableUnloadProtection").length&&"function"==typeof window.onbeforeunload){var t=e("html").attr("lang");jarn.i18n.loadCatalog("tud.theme.webcms2.jarn",t);var n=jarn.i18n.MessageFactory("tud.theme.webcms2.jarn");e("body").append('<div class="overlay" id="formUnloadWarn"><div class="close"><a href="#" class="hiddenStructure" title="Close this box">Close this box</a></div><div class="content-box" role="dialog" aria-labelledby="formUnloadWarnHeadline" aria-describedby="formUnloadWarnMainText" tabindex="0"><div id="content-core"><form class="enableAutoFocus"><div class="dialog-text-content"><h1 class="documentFirstHeading" id="formUnloadWarnHeadline">Attention: Your changes will be lost</h1><div id="formUnloadWarnMainText">  <p class="mainText"></p>  <p class="srText show-for-sr"></p></div></div><div class="button-group"><input class="button" type="submit" value="Don\'t save and leave this page" name="form.button.Forward"><input class="button" type="submit" value="Cancel" name="form.button.Cancel"></div></form></div></div></div>'),e("#formUnloadWarn").overlay({closeOnClick:!0});var a=function(t,a,i){var r=e("#formUnloadWarn"),o=e(document.activeElement);e(".documentFirstHeading",r).text(n("changesWillBeLost")),e("close a",r).text(n("closeBox")).attr("title",n("closeBox")),e("input[name='form.button.Forward']",r).attr("value",n("dontSaveAndLeavePage")),e("input[name='form.button.Cancel'], close",r).attr("value",n("cancel")),e("input[name='form.button.Forward']",r).unbind("click").click(function(t){e("#formUnloadWarn").overlay().close(),a(t)}),e("input[name='form.button.Cancel'], close",r).unbind("click").click(function(t){e("#formUnloadWarn").overlay().close(),i(t),o.focus()}),e("p.mainText",r).text(t),e("p.srText",r).text(n("useButtonsForDialog")),r.overlay().load(),e(".content-box",r).focus()},i=void 0!==history.pushState;!i||history.state&&history.state.editState&&"edit"===history.state.editState||(history.replaceState({editState:"confirm"},""),history.pushState({editState:"edit"},"")),window.onpopstate=function(e){if(e.state&&e.state.editState&&"confirm"===e.state.editState){var t=window.onbeforeunload();if(void 0!==t){return a(t,function(e){return window.onbeforeunload=function(){},e.stopPropagation(),e.preventDefault(),i&&history.go(-1),!1},function(e){return i&&history.pushState({editState:"edit"},""),e.stopPropagation(),e.preventDefault(),!1}),e.stopPropagation(),e.preventDefault(),!1}i&&history.go(-1)}};var r="a[target!='_blank'][target!='blank'][href]:not( [href^='#'], [href^='"+window.location.pathname+"#'], [href^='"+window.location.origin+window.location.pathname+"#'] ), input[type='submit']";e("body").on("click",r,function(t){if(!("#cke_50"==e(t.target).attr("id")||e(t.target).parents("form.enableUnloadProtection, .cke_dialog, .cke_toolbox").size()>0||t.ctrlKey||t.shiftKey||t.metaKey||t.button&&1==t.button)){var n=window.onbeforeunload();if(void 0!==n){var i=t;return a(n,function(e){return window.onbeforeunload=function(){},e.stopPropagation(),e.preventDefault(),i.target.click(),!1},function(e){return e.stopPropagation(),e.preventDefault(),!1}),t.stopPropagation(),t.preventDefault(),!1}}})}})}(jQuery,App),function(e,t,n){n.picture||t.registerUiComponent("polyfillPicture",function(){0==e("script#picturePolyfillLib").length?e("head").append('<script id="picturePolyfillLib" type="text/javascript" src="'+portal_url+'/++resource++tud.theme.webcms2-picturePolyfill.min.js"><\/script>'):"undefined"!=typeof picturePolyfill&&picturePolyfill.parse()})}(jQuery,App,Modernizr),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(e,t){e.registerReadyHandler("search-button-activator",function(){t(".search-form [name='SearchableText']").on("input",function(e){t(".button",t(e.currentTarget).closest(":not(input)")).prop("disabled",!e.currentTarget.value)})})}(App,jQuery),function(e,t,n){var a=null,i=function(){function i(n){var r=this;if(_classCallCheck(this,i),a)return a;a=this,this.url=t.location.href.split("?")[0],this.target_url=n,this.popped=t.history&&"state"in t.history,this.initialURL=location.href,this.popStateCallbacks=[],this.additionalForms=[],this.lastFormObject=null,this.additionalAjax=[],e(t).bind("popstate",function(e){return r.popState(e)})}return _createClass(i,[{key:"pushState",value:function(e,t,a){if(n.history){e=e&&e.length>0?"?"+e:"";var i=this.url+e,r={targetSelector:t.selector,resultSelector:a,url:i};null===history.state?history.replaceState(r,null,i):history.pushState(r,null,i)}}},{key:"popState",value:function(n){if(this.popped||location.href!==this.initialURL){this.popped=!0;var a=location.search.split("?")[1]||"",i=e(history.state.targetSelector),r=history.state.resultSelector;i.length&&r?(this.get(a,i,r,!1),this.firePopStateCallback(a)):t.location.reload(!1)}}},{key:"addPopStateCallback",value:function(e){this.popStateCallbacks.push(e)}},{key:"firePopStateCallback",value:function(e){this.popStateCallbacks.forEach(function(t){return t(e)})}},{key:"addAdditionalForm",value:function(e){this.additionalForms.push(e)}},{key:"addAdditionalAjax",value:function(e){this.additionalAjax.push(e)}},{key:"getQueryString",value:function(e){-1!=this.additionalForms.indexOf(e)&&(e=this.lastFormObject);var t="";return this.additionalForms.forEach(function(e){var n=e.serialize().replace(/(&|)_authenticator=[A-Za-z0\d]*/g,"");""!=t&&(t+="&"),t+=n}),""!=t&&(t+="&"),t+=e.serialize(),this.lastFormObject=e,t}},{key:"get",value:function(t,n,a){var i,r=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=e(n);a="object"==_typeof(a)?a.selector:a,i="string"==typeof t?t:this.getQueryString(t),e.get(this.target_url||this.url,i,function(t){var n=e(e.parseHTML(t));l.hide().html(n.find(a).children()).fadeIn(),o&&r.pushState(i,l,a)}),this.additionalAjax.forEach(function(e){e.get(i)})}}]),i}(),r=function(){function t(n,a,i){_classCallCheck(this,t),this.target_url=n,this.targetSelector=a,this.$target=e(a),this.hasFoundationPlugin=i||!1}return _createClass(t,[{key:"get",value:function(t){var n=this;e.get(this.target_url,t,function(t){var a=e(e.parseHTML(t));n.$target.hide().html(a.find(n.targetSelector).children()).fadeIn(),n.hasFoundationPlugin&&n.$target.foundation()})}}]),t}(),o=function(){function t(e,n,a){var i=this;_classCallCheck(this,t),this.$element=e,this.$target=n,this.ajaxProxy=a,this.ajaxProxy.addPopStateCallback(function(e){return i.popStateCallback(e)}),this.resetCallbacks=[]}return _createClass(t,[{key:"get",value:function(e){this.ajaxProxy.get(e,this.$target,this.$target)}},{key:"popStateCallback",value:function(e){this.resetForm(),this.deserialize(e)}},{key:"addResetCallback",value:function(e){"function"==typeof e.resetForm&&this.resetCallbacks.push(e)}},{key:"fireResetCallbacks",value:function(){this.resetCallbacks.forEach(function(e){e.resetForm()})}},{key:"resetForm",value:function(){this.$element.filter("form")[0].reset()}},{key:"serialize",value:function(){return e(":input",this.$element).filter(function(){return this.value}).serialize()}},{key:"deserialize",value:function(t){var n=this,a=(t=t.replace(/\+/g,"%20")).split("&");e.each(a,function(e,t){var a=t.split("="),i=decodeURIComponent(a[0]),r=decodeURIComponent(a[1]);if(!i)return!0;var o=n.$element.find('[name="'+i+'"]');if(!o.length)return!0;if("radio"==o[0].type||"checkbox"==o[0].type){var l=o.filter('[value="'+r+'"]'),s=l.length>0;s||"on"!=r?l.prop("checked",s):o.first().prop("checked",!0)}else o.val(r)}),this.deserializeAfter()}},{key:"deserializeAfter",value:function(){}}]),t}(),l=function(t){function n(e,t,a){var i;return _classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e,t,a))).bind(),i.blockChanges=!1,i.$facultySelect=e.find('select[name="fakultaet"]'),i.$facultyOptions=i.$facultySelect.children(),i.initFacultyList(),i}return _inherits(n,o),_createClass(n,[{key:"initFacultyList",value:function(){var t=e("[name='wissgebiet']",this.$element).val();t&&this.confineFaculties(t)}},{key:"popStateCallback",value:function(t){o.prototype.popStateCallback.call(this,t),e("select",this.$element).trigger("change.select2")}},{key:"bind",value:function(){var t=this;this.$target.on("click","div.columns > .pagination a",function(e){return t.changePage(e)}),e("select[name]",this.$element).change(function(e){return t.change(e)}),e("input#jump_to_result",this.$element).on("click",function(t){e("html, body").animate({scrollTop:e("#sinsResultview").offset().top},1500)}),e("#details-reset",this.$element).on("click",function(n){n.preventDefault(),e(".accordion select",t.$element).prop("selectedIndex",0).trigger("change.select2"),t.change()})}},{key:"triggerChange",value:function(){this.blockChanges=!0,e("select[name]",this.$element).trigger("change"),this.blockChanges=!1}},{key:"refillFaculties",value:function(){this.$facultySelect.empty().append(this.$facultyOptions).val("").trigger("change.select2")}},{key:"confineFaculties",value:function(e){var t=this.$facultySelect.val();this.$facultySelect.children(":nth-child(n+2)").remove();var n=this.$facultyOptions.filter("[data-related='"+e+"']");this.$facultySelect.append(n),n.filter("[value='"+t+"']").length>0?this.$facultySelect.val(t):this.$facultySelect.val("")}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.blockChanges){var n=t?e(t.currentTarget):null;if(n)("wissgebiet"==n.attr("name")||"wissgebiet"==e(n.data("sync-with")).attr("name"))&&(n.val()?this.confineFaculties(n.val()):this.refillFaculties());this.get(this),this.fireResetCallbacks()}}},{key:"changePage",value:function(t){t.preventDefault();var n=(t.srcElement||t.target).href.split("?")[1];this.get(n);var a=this.$target.offset().top;e("html, body").animate({scrollTop:a},750)}},{key:"resetForm",value:function(){this.refillFaculties(),e("select[name]",this.$element).val(""),this.triggerChange()}},{key:"deserializeAfter",value:function(){this.initFacultyList(),this.triggerChange()}}]),n}(),s=function(t){function n(t,a,i){var r;return _classCallCheck(this,n),(r=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t,a,i))).bind(),e.getJSON("app/infoapp/getKeywordJSON",function(n){t.find('input[name="stichworte"]').devbridgeAutocomplete().setOptions({lookup:n,onSelect:function(){e(this).submit()}})}),r}return _inherits(n,o),_createClass(n,[{key:"bind",value:function(){var e=this;this.$element.on("submit",function(t){return e.submit(t)})}},{key:"submit",value:function(t){t.preventDefault(),this.get(this),this.fireResetCallbacks(),this.$element.find("input.submitting").removeClass("submitting"),e("html, body").animate({scrollTop:e("#sinsResultview").offset().top},1500)}},{key:"resetForm",value:function(){this.$element.find('input[name="stichworte"]').val("")}}]),n}(),c=function(t){function n(e,t,a){var i;return _classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e,t,a))).bind(),i}return _inherits(n,o),_createClass(n,[{key:"bind",value:function(){var e=this;this.$target.on("click",".sort-default",function(t){return e.sortDefault(t)}),this.$target.on("click",".sort-alphabetical",function(t){return e.sortAlphabetical(t)}),this.$target.on("click",".glossary-toc a",function(t){return e.scrollToLetter(t)}),this.$target.on("click",".glossary-content h2.title-blue",function(t){return e.scrollToGlossarytop(t)})}},{key:"scrollToLetter",value:function(t){t.preventDefault();var n=(t.srcElement||t.target).text;e("html, body").animate({scrollTop:e("#sins_index_"+n).offset().top},1500)}},{key:"scrollToGlossarytop",value:function(t){t.preventDefault(),e("html, body").animate({scrollTop:e("#sinsResultview").offset().top},1500)}},{key:"sortDefault",value:function(t){t.preventDefault();var n=e('input[name="listView"]',this.$element);n.val()&&(n.val(""),this.reloadPage())}},{key:"sortAlphabetical",value:function(t){t.preventDefault();var n=e('input[name="listView"]',this.$element);n.val()||(n.val(1),this.reloadPage())}},{key:"reloadPage",value:function(){this.get(this),e("html, body").animate({scrollTop:e("#sinsResultview").offset().top},1500)}},{key:"resetForm",value:function(){this.$element.find('input[name="listView"]').val("")}}]),n}();e(function(e){if(e("#sins-keyword-search").length){var n=e("#sins-results"),a=new i("sins_start_results"),o=new l(e("#sinsfilter"),n,a),u=new s(e("#sinsKeywordSearch"),n,a),d=new c(e("#sinsResultview"),n,a),h=new r("sins_start_additional_results","#sins-additional-results",!0);o.addResetCallback(u),u.addResetCallback(o),a.addAdditionalForm(d),a.addAdditionalAjax(h);var f=t.location.href.split("?")[1]||"";f.indexOf("stichworte")>=0?a.lastFormObject=u:a.lastFormObject=o,a.get(f,n,n)}})}(jQuery,window,Modernizr),function(e,t){var n="transitionend.slideVertical webkitTransitionEnd.slideVertical oTransitionEnd.slideVertical";t.registerReadyHandler("slide-vertical",function(){e("[data-toggler][data-animation='slide-vertical']").each(function(t,a){e(a).on("on.zf.toggler",function(t){t.stopPropagation();var a=e(this),i=a.attr("data-max-height"),r=a.height();i||(a.css({transition:"unset","max-height":""}),a.hide().show(0),i=a.actual("outerHeight"),a.css({"max-height":r})),a.on(n,function(){a.off(n),a.hasClass("open")&&(a.css({"max-height":"",transition:"unset"}),a.hide().show(0),setTimeout(function(){a.css({transition:""})},0))}),a.hide().show(0),a.css({transition:"","max-height":i+"px"})}).on("off.zf.toggler",function(t){t.stopPropagation();var a=e(this);a.css({transition:"unset","max-height":a.height()+"px"}),a.hide().show(0),a.css({transition:"","max-height":a.attr("data-min-height")+"px"}),a.on(n,function(){a.off(n),a.hasClass("open")||a.css({display:""})})}).each(function(t,n){var a=e(n),i=a.attr("data-max-height"),r=void 0===i?void 0:parseInt(i),o=a.attr("data-min-height"),l=void 0===o?0:parseInt(o),s=a.hasClass("open");i&&a.attr("data-max-height",r),a.attr("data-min-height",l),s||(a.css({"max-height":l+"px",transition:"unset"}),setTimeout(function(){a.css({transition:""})},0))})})})}(jQuery,App),function(e,t,n){e.widget("tud.stage",{options:{selector:{links:"a[data-href][data-index]",targetWrapper:"#stage-open",parent:".stage-closed",close:".close-button",current:"#stage-open > .active",mobile:"#stage-mobiles"},attr:{href:"data-href",index:"data-index",active:"data-active-index"},scrollToCurrentDelay:800},_$targetWrapper:null,_$parent:null,_$current:null,_$mobile:null,_carousels:{},_currentAjax:null,_owlLastTransitionTarget:null,_create:function(){var t=this.options;this._$targetWrapper=e(t.selector.targetWrapper),this._$parent=e(t.selector.parent),this._$mobile=e(t.selector.mobile),this._bindLinks()},_bindLinks:function(){var t=this,a=this._$targetWrapper,i=this._carousels,r=this.options;e(r.selector.links).click(function(o){o.preventDefault();var l=e(this),s=l.attr(r.attr.href),c=l.attr(r.attr.index),u=l.attr(r.attr.active);l.data("tud-block")&&l.data("tud-block").isBlocked()||(null!==t._currentAjax&&t._currentAjax.abort(),e(r.selector.links).each(function(){e(this).data("tud-block")&&e(this).block("unblock")}),l.block(),t._$mobile.trigger("to.owl.carousel",c),i[c]?(t._$current=e("[data-index="+c+"]",t._$targetWrapper),t._toggleClasses(),TudMotionUI.animateIn(a,"fade-in"),e(".owl-item.active",t._$current).each(function(){var t=e(".teaser-fader",this);e(this).hasClass("center")?t.show():t.hide()}),l.block(),t._scrollCurrentTo(u),"undefined"!=typeof _paq&&_paq.push(["trackEvent","stage",l.attr("data-stage-container-name"),l.attr("data-stage-story-name")])):t._currentAjax=e.get({url:s,dataType:"html",success:function(o){var s=e("body > div",e.parseXML(o));t._$current=s,t._$current.attr(r.attr.index,c),a.append(s),0===parseInt(u)&&e(".teaser",t._$current).first().find(".teaser-fader").show(),TudMotionUI.animateIn(a,"fade-in"),t._$parent.addClass("hide");var d=new n.Carousel(e("[data-carousel='']",s));i[c]=d,l.block(),e("[data-carousel]",t._$current).on("translate.owl.carousel",function(a){if(t._owlLastTransitionTarget!==a.item.index)if(n.MediaQuery.atLeast("medium")){var i=e(".teaser-fader:not(.fade-out):visible",this);TudMotionUI.animateOut(i,"fade-out fast"),t._owlLastTransitionTarget=a.item.index}else e(".teaser-fader",this).show()}).on("translated.owl.carousel",function(a){if(n.MediaQuery.atLeast("medium")&&t._owlLastTransitionTarget===a.item.index){var i=e(".owl-item",this).eq(a.item.index).find(".teaser-fader:hidden");TudMotionUI.animateIn(i,"fade-in fast",function(){i.css("display","inline-block")})}}),t._scrollCurrentTo(u),"undefined"!=typeof _paq&&_paq.push(["trackEvent","stage",l.attr("data-stage-container-name"),l.attr("data-stage-story-name")]),e(r.selector.close,s).click(function(e){e.preventDefault(),t._toggleClasses(),t._$current=null})}}))})},_toggleClasses:function(){this._$parent.toggleClass("hide"),this._$current.toggleClass("hide"),this._$current.toggleClass("active")},_scrollCurrentTo:function(t){var n=this.options,a=e("html, body"),i=e("[data-carousel]",this._$current),r=i.offset().top;a.scrollTop()>r&&a.scrollTop(r),setTimeout(function(){i.trigger("to.owl.carousel",parseInt(t))},n.scrollToCurrentDelay)}}),t.registerReadyHandler("stage",function(){e("#stage").stage()})}(jQuery,App,Foundation),function(e,t){var n=function(){function n(a,i){if(_classCallCheck(this,n),this.$element=a,this.options=e.extend({},n.defaults,this.$element.data(),i),this.$fields=e("[data-sync-with]",this.$element),this.options.hasReveal){var r=this.getReveal(this.$element),o=e("[data-sync-with]",r);e.merge(this.$fields,o)}this.bind(),t.registerPlugin(this,"Sync")}return _createClass(n,[{key:"getReveal",value:function(t){var n=e("[data-open]",t).data("open");return e("#"+n)}},{key:"getVal",value:function(e){var t=e.data("value");return void 0===t&&(t=e.val()),t}},{key:"getStateVal",value:function(e){return e.is("[aria-selected='false']")?"":this.getVal(e)}},{key:"suitableEvents",value:function(e){return e.is("textarea")||e.is("input[type='search'], input[type='text']")?"keyup":"change"}},{key:"bind",value:function(){var t=this;this.$fields.each(function(n,a){var i=e(a),r=e(i.data("sync-with")),o=t.suitableEvents(i),l=t.suitableEvents(r),s=i.data("sync-mirror"),c=void 0!==s&&(0!=s||""==s),u=function(e){e.stopPropagation(),r.unbind(l,d),t.setVal(r,t.getStateVal(i)),c&&r.bind(l,d)},d=function(n){n.stopPropagation(),i.unbind(o,u),t.setVal(i,t.getStateVal(e(n.target))),i.bind(o,u)};i.bind(o,u),c&&r.bind(l,d)})}},{key:"setVal",value:function(t,n){var a=this;t.is(":input:not(button)")&&(t.is("[type='radio']")?(t.removeAttr("checked"),t.filter(function(){return e(this).val()===n}).prop("checked",!0)):(t.val(n),t.trigger("change"))),t.filter("[aria-selected][value], [aria-selected][data-value]").each(function(t,i){var r=e(i),o=n==a.getVal(r);r.attr("aria-selected",o)})}}]),n}();n.defaults={hasReveal:!1},t.plugin(n,"Sync")}(jQuery,Foundation),function(e,t){function n(e){return e.replace(/\r?\n|\r/g,"").replace(/\s\s+/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}e.fn.tableToTree=function(){var t=e(this),a=[];return t.children("tbody").children("tr").each(function(t,i){e(i).children("td").each(function(r,o){var l=n(e(o).text()),s=n(e(o).html());if(""!=l){var c={row:t,coll:r,id:function(e){for(var t=0,n=0;n<e.length;n++)t=~~((t<<5)-t+e.charCodeAt(n));return t}(l),element:o,parent:i,text:l,html:s,children:[]},u=a;if(a.length>0)for(var d=0;d<r;d++)u=u[u.length-1].children;var h=!1;for(var f in u)u[f].id==c.id&&(h=!0);h||u.push(c)}})}),a},e.fn.tableToDropDown=function(){this.each(function(){var a=e(this).tableToTree(),i=e(this);i.hide(),e(".doubleScroll-scroll-wrapper").hide();var r=[],o=[],l=0;i.children("thead").children("tr").children("th").each(function(t,a){r.push(n(e(a).html()))});var s=e("<div/>").attr({class:"table-to-dropdown"}).insertAfter(i);function c(n){var i=a,c=!1;for(var u in o)for(var d in i)if(void 0!==i[d]&&o[u]==i[d].id)for(var h in i=i[d].children)0==i[h].children.length&&(c=!0);var f=e("<div/>").attr({id:"stepWrapper"+n,class:"stepWrapper","data-step":n}).css({display:"none"}),p=c?r[n]:n+1+". "+r[n],g=e("<div/>").attr({class:"stepHeadline","data-step":n}).html(p);if(f.append(g),c){var m=e("<div/>").attr({class:"lastStepContent"});for(var v in f.append(m),i)m.append(i[v].html);e("a[href]",f).wrap("<span class='block'></span>")}else{var y=e("<select />").attr({name:"step"+n,class:"step gray"}),b=e("html").attr("lang"),w="";for(var k in w="de"==b?"--- Bitte wählen ---":"--- Please select ---",y.append(e("<option/>").attr({value:-1,"data-step":n}).html(w)),i)y.append(e("<option/>").attr({value:i[k].id,"data-step":i[k].coll}).html(i[k].text));f.append(y)}s.append(f),f.slideDown("fast"),l=n,t.trigger("combobox")}c(0),e(document).on("change",".step",function(){var t=e(this).val(),n=parseInt(e(this).children(":selected").data("step"))+1;if(-1!=t&&n>l)o.push(t),c(n);else if(-1!=t&&n==l)o.pop(),o.push(t),e(".stepWrapper:last").slideUp("fast",function(){e(this).remove()}),c(n);else{for(var a=-(l-n)-1,i=0;i>a;i--)o.pop();e(".stepWrapper").slice(a).each(function(t,n){e(n).slideUp("fast",function(){e(n).remove()})}),l+=a,-1!=t&&(o.push(t),c(n))}}),i.remove()})},t.registerReadyHandler("tudTableToDropdown",function(){e("[data-table-to-dropdown]").tableToDropDown()},["combobox"])}(jQuery,App),function(e,t){var n=function(){function n(a,i){_classCallCheck(this,n),this.$element=a,this.options=e.extend({},n.defaults,this.$element.data(),i),this.bind(),t.registerPlugin(this,"ToggleButton")}return _createClass(n,[{key:"bind",value:function(){var t=this;this.$element.on("click",function(n){var a="false"!==t.$element.attr("aria-selected");e(t.options.resetsToggles).not(t.$element).filter("[data-toggle-button]").each(function(){e(this).foundation("unpress",!1)}),t.$element.attr("aria-selected",!a),t.$element.trigger("change")})}},{key:"press",value:function(){this.$element.attr("aria-selected",!0),this.$element.trigger("change")}},{key:"unpress",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$element.attr("aria-selected",!1),e&&this.$element.trigger("change")}}]),n}();n.defaults={resetsToggles:null},t.plugin(n,"ToggleButton")}(jQuery,Foundation),function(e,t){t.plugin(function n(a,i){var r=this;_classCallCheck(this,n),this.$element=a,this.$element.on("change.toggleCheckboxGroup","input[type='checkbox'][data-checkbox-group]",function(t){var n=e(t.target);if(0!=n.prop("checked")){var a=n.attr("data-checkbox-group");r.$element.find("input[type='checkbox'][data-checkbox-group]").each(function(){var t=e(this);t.attr("data-checkbox-group")!=a&&t.prop("checked",!1)})}}),t.registerPlugin(this,"ToggleCheckboxGroup")},"ToggleCheckboxGroup")}($,Foundation),function(e,t){var n=function(){function t(n,a){_classCallCheck(this,t),this.$element=n,this.options=e.extend({},t.defaults,this.$element.data(),a),this.groupName=this.options.togglerGroup,this.$target=e("#"+this.options.toggle),this.toggleClass=this._getToggleClass(),this.$target.on("on.zf.toggler.group",this._onOpen.bind(this)),this.$target.on("off.zf.toggler.group",this._onClose.bind(this)),"true"===this.$element.attr("aria-expanded")&&this._clickOff()}return _createClass(t,[{key:"_getToggleClass",value:function(){var e=this.$target.data("toggler");return e.startsWith(".")&&(e=e.slice(1)),e}},{key:"_clickOff",value:function(){this.options.alwaysOneOpen&&this.$element.on("click.zf.trigger.group",function(e){return e.preventDefault(),!1})}},{key:"_clickOn",value:function(){this.options.alwaysOneOpen&&this.$element.off("click.zf.trigger.group")}},{key:"_onOpen",value:function(){this._clickOff();var t=e("[data-toggle][data-toggler-group='"+this.groupName+"']").not(this.$element);t.length&&t.foundation("close")}},{key:"_onClose",value:function(){this._clickOn()}},{key:"close",value:function(){var e=this.$target.filter("."+this.toggleClass);e.length&&e.foundation("toggle")}},{key:"destroy",value:function(){this.$target&&(this.$target.off("on.zf.toggler.group"),this.$target.off("off.zf.toggler.group")),this._clickOn&&this._clickOn()}}]),t}();n.defaults={alwaysOneOpen:!1},t.plugin(n,"TogglerGroup")}($,Foundation);
